@model MO.WebsiteMaster.SliderCreateVM
@{
    ViewData["Title"] = "Add Slider";
    Layout = "~/Views/Shared/_LayoutIn.cshtml";
    var nonce = Context.Items["CSPNonce"]?.ToString();
}
<style nonce="@nonce">
    /* Overlay */
    .manual-modal {
        display: none;
        position: fixed;
        z-index: 9999;
        left: 0;
        top: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(0,0,0,0.7);
        justify-content: center;
        align-items: center;
    }
     
    /* Modal box */
    .manual-modal-content {
        position: relative;
        background: #fff;
        padding: 10px;
        border-radius: 6px;
        max-width: 90%;
        max-height: 90%;
        box-shadow: 0 5px 20px rgba(0,0,0,0.4);
    }

    /* Image */
    .manual-modal-image {
        max-width: 100%;
        max-height: 80vh;
        object-fit: contain;
        display: block;
    }

    /* Close button */
    .manual-close {
        position: absolute;
        top: 5px;
        right: 10px;
        font-size: 28px;
        font-weight: bold;
        color: #000;
        cursor: pointer;
    }

        .manual-close:hover {
            color: red;
        }
</style>
<form asp-action="SliderVM" asp-controller="WebsiteMaster"
      method="post" enctype="multipart/form-data">

    <input type="hidden" asp-for="Id" />
    <input type="hidden" asp-for="ExistingImage" />

    <div class="form-group">
        <label>Slider Image</label>
        <input type="file" asp-for="ImageFile" class="form-control" />
        <small class="text-muted">Leave empty to keep old image</small>
    </div>

    <div class="form-group">
        <label>Title</label>
        <input type="text" asp-for="Title" class="form-control" />
    </div>

    <div class="form-group">
        <label>Display Order</label>
        <input type="number" asp-for="DisplayOrder" class="form-control" />
    </div>

    <div class="form-group">
        <label>
            <input type="checkbox" asp-for="IsActive" />
            Is Active
        </label>
    </div>

    <button type="submit" class="btn btn-primary" id="btnSave">
        Save
    </button>
    <button type="button"
            class="btn btn-secondary d-none"
            id="btnCancel">
        Cancel
    </button>
</form>

<hr />

<div class="table-responsive shadow-sm">
    <table class="table table-bordered table-hover align-middle" id="slider_Table">
        <thead class="table-success text-center">
            <tr>
                <th>#</th>
                <th>Image</th>
                <th>Title</th>
                <th>Display Order</th>
                <th>Is Active</th>
                <th style="width:100px;">Action</th>
            </tr>
        </thead>
        <tbody>
            @if (Model.SliderList != null && Model.SliderList.Any())
            {
                int i = 1;
                foreach (var item in Model.SliderList)
                {
                    <tr>
                        <td class="text-center">@i</td>
                        <td class="text-center">
                            @* <img src="@item.ImageBase64"
                                 style="height:60px;" /> *@
                            <button type="button"
                                    class="btn btn-sm btn-info view-image-btn"
                                    data-image="@item.ImageBase64">
                                View
                            </button>
                        </td>
                        <td>@item.Title</td>
                        <td class="text-center">@item.DisplayOrder</td>
                        <td class="text-center">
                            @(item.IsActive ? "Active" : "Inactive")
                        </td>
                        <td class="text-center">
                          @*   <button class="btn btn-sm btn-warning">Edit</button> *@
                            <button type="button"
                                    class="btn btn-sm btn-warning edit-btn"
                                    data-id="@item.Id"
                                    data-title="@item.Title"
                                    data-order="@item.DisplayOrder"
                                    data-active="@item.IsActive"
                                    data-image="@item.ImageBase64">
                                Edit
                            </button>

                            <button class="btn btn-sm btn-danger del-btn" data-sliderid="@item.Id">Delete</button>
                            <button type="button"
                                    class="btn btn-sm toggle-status-btn @(item.IsActive ? "btn-secondary" : "btn-success")"
                                    data-id="@item.Id"
                                    data-status="@item.IsActive">
                                @(item.IsActive ? "Deactivate" : "Activate")
                            </button>


                        </td>
                    </tr>
                    i++;
                }
            }
            else
            {
                <tr>
                    <td colspan="6" class="text-center text-danger">
                        No record found
                    </td>
                </tr>
            }
        </tbody>
    </table>
</div>
@* <div class="modal fade" id="imageModal" tabindex="-1">
    <div class="modal-dialog modal-lg modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">Slider Image</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
            </div>
            <div class="modal-body text-center">
                <img id="modalImage"
                     class="img-fluid modal-image" />
            </div>
        </div>
    </div>
</div> *@
<!-- Manual Modal -->
<div id="imageModalManual" class="manual-modal">
    <div class="manual-modal-content">
        <span class="manual-close">&times;</span>
        <img id="modalImage" class="manual-modal-image" />
    </div>
</div>

<script nonce="@nonce"
        src="~/custom/websitemaster.js"
        asp-append-version="true"></script>

