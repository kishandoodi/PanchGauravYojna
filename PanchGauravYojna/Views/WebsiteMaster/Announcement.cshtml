@model MO.WebsiteMaster.Announcement
@{
    ViewData["Title"] = "Announcement";
    Layout = "~/Views/Shared/_LayoutIn.cshtml";
    var nonce = Context.Items["CSPNonce"]?.ToString();
}
<style nonce="@nonce">
    /* Overlay */
    .manual-modal {
        display: none;
        position: fixed;
        z-index: 9999;
        left: 0;
        top: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(0,0,0,0.7);
        justify-content: center;
        align-items: center;
    }

    /* Modal box */
    .manual-modal-content {
        position: relative;
        background: #fff;
        padding: 10px;
        border-radius: 6px;
        max-width: 90%;
        max-height: 90%;
        box-shadow: 0 5px 20px rgba(0,0,0,0.4);
    }

    /* Image */
    .manual-modal-image {
        max-width: 100%;
        max-height: 80vh;
        object-fit: contain;
        display: block;
    }

    /* Close button */
    .manual-close {
        position: absolute;
        top: 5px;
        right: 10px;
        font-size: 28px;
        font-weight: bold;
        color: #000;
        cursor: pointer;
    }

        .manual-close:hover {
            color: red;
        }
</style>
<div class="card radius-10">
    <div class="card-header color-header headercolor1">
        <div class="d-flex align-items-center justify-content-between w-100">
            <!-- Title -->
            <h6 class="mb-0">Add Announcement News</h6>
        </div>
    </div>
    <div class="card-body">
<form asp-action="Announcement" asp-controller="WebsiteMaster"
      method="post" enctype="multipart/form-data">

    <input type="hidden" asp-for="Id" />
    <input type="hidden" asp-for="ExistingImage" />

    <div class="form-group">
        <label>Announcement File</label>
                <input type="file" asp-for="ImageFile" class="form-control" accept="application/pdf" data-val="false" />
        <small class="text-muted">On updation Leave empty to keep old file(pdf only)</small>
    </div>

    <div class="form-group">
        <label>Title</label>
        <input type="text" asp-for="Title" class="form-control" />
    </div>

    <div class="form-group">
        <label>Display Order</label>
        <input type="number" asp-for="DisplayOrder" class="form-control" />
    </div>

    <div class="form-group">
        <label>
            <input type="checkbox" asp-for="IsActive" />
            Is Active
        </label>
    </div>
    <div class="form-group">
        <label>
            <input type="checkbox" asp-for="IsNew" />
            IsNew
        </label>
    </div>
    <button type="submit" class="btn btn-primary" 
    id="btnAnnouncement" >
        Save
    </button>
    <button type="button"
            class="btn btn-secondary d-none"
            id="btnCancelAnnouncement">
        Cancel
    </button>
</form>

<hr/>

<div class="table-responsive shadow-sm">
    <table class="table table-bordered table-hover align-middle" id="Announcemen_Table">
        <thead class="table-success text-center">
            <tr>
                <th>#</th>
                <th>Image</th>
                <th>Title</th>
                <th>Display Order</th>
                <th>Is Active</th>
                <th >Action</th>
            </tr>
        </thead>
        <tbody>
            @if (Model.AnnouncementList != null && Model.AnnouncementList.Any())
            {
                int i = 1;
                foreach (var item in Model.AnnouncementList)
                {
                    <tr>
                        <td class="text-center">@i</td>
                        <td class="text-center">
                            @* <img src="@item.ImageBase64"
                                 style="height:60px;" /> *@
                            @* <button type="button"
                                    class="btn btn-sm btn-info view-Announcement-btn"
                                    data-image="@item.ImageBase64">
                                View
                            </button> *@

                            <button type="button"
                                    class="btn btn-sm btn-success download-Announcement-btn"
                                    data-file="@item.ImageBase64"
                                    title="Download">
                                ⬇
                            </button>

                        </td>
                        <td>@item.Title</td>
                        <td class="text-center">@item.DisplayOrder</td>
                        <td class="text-center">
                            @(item.IsActive ? "Active" : "Inactive")
                        </td>
                        <td class="text-center">
                            @*   <button class="btn btn-sm btn-warning">Edit</button> *@
                            <button type="button"
                                    class="btn btn-sm btn-warning edit-btn-Announcement"
                                    data-id="@item.Id"
                                    data-title="@item.Title"
                                    data-order="@item.DisplayOrder"
                                    data-active="@item.IsActive"
                                    data-image="@item.ImageBase64">
                                Edit
                            </button>

                            <button class="btn btn-sm btn-danger del-btn-Announcement" data-sliderid="@item.Id">Delete</button>
                            <button type="button"
                                    class="btn btn-sm toggle-status-btn-Announcement @(item.IsActive ? "btn-secondary" : "btn-success")"
                                    data-id="@item.Id"
                                    data-status="@item.IsActive">
                                @(item.IsActive ? "Deactivate" : "Activate")
                            </button>


                        </td>
                    </tr>
                    i++;
                }
            }
            else
            {
                <tr>
                    <td colspan="6" class="text-center text-danger">
                        No record found
                    </td>
                </tr>
            }
        </tbody>
    </table>
</div>
    </div>
</div>
@* div id="AnnouncemenModalManual" class="manual-modal">
    <div class="manual-modal-content">
        <span class="manual-close">&times;</span>
        <img id="modalAnnouncement" class="manual-modal-image" />
    </div>
</div> *@

<div id="AnnouncemenModalManual" class="manual-modal">
    <div class="manual-modal-content">
        <span class="manual-close">&times;</span>

        <div id="modalContent"></div>

    </div>
</div>

<script nonce="@nonce"
        src="~/custom/announcement.js"
        asp-append-version="true"></script>
